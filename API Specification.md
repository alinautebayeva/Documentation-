# 1. Основная информация 



|  |  |
|---|---|
| Автор  | Алина |
| Задача | Реализовать возможность бронировать переговорную комнату через мобильное приложение  |
| Бизнес-постановка | Пользователь (сотрудник компании) бронирует свободную переговорную комнату в приложении, вместо текущего процесса бронирования через запросы по электронной почте  |

## 1.1 История изменений 

 Версия | Дата | Автор | Описание  
---|---|---|---
 1.1 | 10.01.2026 | Алина |  
 1.0 | 20.12.2025 | Алина | Создана первая версия документа 




# 2. Авторизация запросов 
Авторизация осуществляется при помощи токена полученного на этапе входа пользователя в сеанс (/api/login).
Токен записывается в заголовок (Headers) HTTP запроса.
Токен действует при отсутствии запросов пользователя к серверу в течении 60 минут.

# 3. Описание запросов и ответов

## 3.1 Вход пользователя в систему

__Метод:__ POST <br>
__URL:__ api/login <br>
__Content-Type:__ application/json

Тело запроса:

``` 
{
    "email": "ivanpetrov@example.com",
    "password": "example123!"
}
``` 

 Параметр  | Тип | Обязательный/Необязательный | Описание 
---|---|---|---
 email | string | обязательный | Email пользователя 
 password | string | обязательный | Пароль пользователя  

### __Ответы:__ 

#### 1. 200 OK 

Тело ответа: 
```
{
  "accessToken": "asdfgh...",
  "refreshToken": "zcvb......",
  "user": {
    "id": 12345,
    "email": "ivanpetrov@example.com",
    "firstname": "Иван",
    "lastname": "Петров"
  }
}
```
#### 2. 401 Unauthorized 

Тело ответа: 

```
{
  "message": "Invalid email or password"
}
```

#### 3. 400 Bad Request
Тело ответа: 
```
{
 "message": "Email is required"
}
```
## 3.2 Получение списка переговорных комнат 
Метод возвращает список переговорных комнат, доступных в системе.
Может использоваться для отображения списка комнат и фильтрации по параметрам (этаж, вместимость, наличие проектора).

__Метод:__ GET <br>
__URL:__ api/rooms <br>
__Content-Type:__ application/json <br>
Authorization: Bearer <access_token>

__Пример запроса:__

```
GET /api/rooms?capacity=6&has_projector=true&floor=2
```

__Параметры запроса:__

 Параметр | Тип | Обязательный/необязательный | Описание  
---|---|---|---
 capacity | integer | необязательный  | Максимальная вместимость переговорной 
 has_projector | boolean | необязательный  | Наличие проектора  
 floor | integer | необязательный  | Этаж, на котором находится переговорная  

### __Ответы:__ 

#### 1. 200 OK 

Тело ответа: 

```
[
  {
    "roomID": 2,
    "roomName": "Blue",
    "capacity": 6,
    "has_projector": true,
    "floor": 2 
  }
  {
    "roomID": 7,
    "roomName": "Green",
    "capacity": 4,
    "has_projector": true,
    "floor": 2 
  }
]
``` 
__Параметры ответа:__

| Параметр | Тип     | Описание                           |
|----------|---------|------------------------------------|
| roomID   | integer | Идентификатор переговорной комнаты |
| roomName | string  | Название переговорной комнаты      |

#### 2. 401 Unauthorized 

Тело ответа: 

```
{
  "message": "Unauthorized: Access token is missing or invalid"
}
```

#### 2. 403 Forbidden 

Тело ответа: 

```
{
  "message": "You do not have permission to perform this action"
}
```

## 3.3 Получение списка своих бронирований
Метод возвращает список бронирований пользователя.

__Метод:__ GET <br>
__URL:__ api/bookings/my <br>
__Content-Type:__ application/json <br>
Authorization: Bearer <access_token>

__Пример запроса:__

```
GET /api/bookings/my?status=active&start_date=2026-02-01&end_date=2026-02-28
```

 Параметр | Тип | Обязательный/необязательный | Описание  
---|---|---|---
 status | string | необязательный  | Статус бронирования (active/cancelled) 
 start_date | string (YYYY-MM-DD) | необязательный  | Начальная дата для фильтра по периоду времени  
 end_date | string (YYYY-MM-DD) | необязательный  | Конечная дата для фильтра по периоду времени  




### __Ответы:__ 

#### 1. 200 OK 

Тело ответа: 

```

 [
    {
      "bookingiD": 101,
      "room": {
        "roomID": 3,
        "roomName": "Red",
        "floor": 1
      },
      "start_time": "2026-02-07T10:00:00",
      "end_time": "2026-02-07T11:00:00",
      "status": "active",
      "created_at": "2026-02-05T09:30:00"
    },
    {
      "bookingID": 102,
      "room": {
        "roomID": 1,
        "roomName": "Yellow",
        "floor": 1
      },
      "start_time": "2026-02-08T14:00:00",
      "end_time": "2026-02-08T15:30:00",
      "status": "active",
      "created_at": "2026-02-06T12:00:00"
    }
  ],
``` 
Параметры ответа:
| Параметр   | Тип               | Описание                             |
|------------|-------------------|--------------------------------------|
| bookingID  | integer           | Идентификатор бронирования           |
| start_time | string (datetime) | Дата и время старта бронирования     |
| end_time   | string (datetime) | Дата и время окончания бронирования  |
| created_at | string (datetime) | Дата и время создания бронирования   |



#### 2. 401, 403 - аналогичны п. 3.2


## 3.4 Бронирование переговорной комнаты 
Метод позволяет пользователю забронировать переговорную комнату на определенное время. Система проверяет доступность комнаты в указанном временном интервале и создаёт бронирование, если слот свободен.

__Метод:__ POST <br>
__URL:__ api/bookings <br>
__Content-Type:__ application/json <br>
Authorization: Bearer <access_token>

__Тело запроса:__

```
{
    "roomID": 2,
    "start_time": 
    
}
